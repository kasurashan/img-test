name: Slack Reminder - Research Progress

# ğŸ” 2ì£¼ë§ˆë‹¤ í™”ìš”ì¼ ì˜¤ì „ 4ì‹œ UTC (KST ê¸°ì¤€ ì˜¤í›„ 1ì‹œ)
# ì˜ˆ: ë§¤ë‹¬ 1ì£¼ì°¨ í™”ìš”ì¼ê³¼ 3ì£¼ì°¨ í™”ìš”ì¼ ë“±
on:
  schedule:
    - cron: '0 4 1-7 * 2'     # ì²«ì§¸ ì£¼ í™”ìš”ì¼ 13:00 KST
    - cron: '0 4 15-21 * 2'   # ì…‹ì§¸ ì£¼ í™”ìš”ì¼ 13:00 KST
  workflow_dispatch:          # ìˆ˜ë™ ì‹¤í–‰ë„ í—ˆìš©

jobs:
  post-to-slack:
    runs-on: ubuntu-latest
    steps:
      - name: Send reminder to Slack
        env:
          SLACK_TOKEN: ${{ secrets.SLACK_TOKEN_AIM_LAB }}
          TZ: Asia/Seoul
        run: |
          IMAGE_URL="https://raw.githubusercontent.com/kasurashan/slack-reminder/main/Cap%202025-04-25%2001-36-30-538.jpg"

          cat <<EOF > payload.json
          {
            "channel": "#research-progress",
            "text": "You're welcome to upload to the Method Archive anytimeâ€”uploads usually happen after a research cycle, but we're always happy to see what you've got!",
            "attachments": [
              {
                "fallback": "ìŠ¬ë™ ë¦¬ë§ˆì¸ë” ì´ë¯¸ì§€",
                "image_url": "$IMAGE_URL",
                "text": ""
              }
            ]
          }
          EOF

          curl -s -X POST \
            -H "Authorization: Bearer $SLACK_TOKEN" \
            -H "Content-Type: application/json; charset=utf-8" \
            --data @payload.json \
            https://slack.com/api/chat.postMessage | jq .

